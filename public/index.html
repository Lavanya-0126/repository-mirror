<!DOCTYPE html>
<html>
<head>
  <title>GitHub Repository Analyzer</title>
  <style>
    body {
      font-family: Arial;
      background: #0b1220;
      color: white;
      padding: 40px;
    }
    input {
      width: 70%;
      padding: 12px;
      font-size: 16px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      margin-left: 10px;
    }
    .card {
      margin-top: 30px;
      background: #111827;
      padding: 20px;
      border-radius: 10px;
    }
    .score {
      color: #22c55e;
      font-size: 24px;
      font-weight: bold;
    }
  </style>
</head>

<body>

<h1>GitHub Repository Analyzer</h1>

<input id="repo" placeholder="https://github.com/user/repo">
<button onclick="analyze()">Analyze</button>

<div id="result" class="card" style="display:none;">
  <div class="score" id="score"></div>
  <p><strong>Summary:</strong> <span id="summary"></span></p>
  <p><strong>Roadmap:</strong></p>
  <ul id="roadmap"></ul>
</div>

<script>
async function analyze() {
  const repoUrl = document.getElementById("repo").value;

  const res = await fetch("/api/analyze", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ repoUrl })
  });

  const data = await res.json();

  document.getElementById("result").style.display = "block";
  document.getElementById("score").innerText = `Score: ${data.score} / 100`;
  document.getElementById("summary").innerText = data.summary;

  const roadmap = document.getElementById("roadmap");
  roadmap.innerHTML = "";
  data.roadmap.forEach(step => {
    const li = document.createElement("li");
    li.innerText = step;
    roadmap.appendChild(li);
  });
}
</script>

</body>
</html>
