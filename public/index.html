<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GitHub Repository Analyzer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0b1220;
      color: #fff;
      padding: 40px;
    }
    input {
      width: 70%;
      padding: 12px;
      font-size: 16px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      margin-left: 10px;
      cursor: pointer;
    }
    .card {
      margin-top: 30px;
      background: #111827;
      padding: 20px;
      border-radius: 10px;
    }
    .score {
      color: #22c55e;
      font-size: 24px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h1>GitHub Repository Analyzer</h1>

<input id="repoUrl" placeholder="https://github.com/user/repo" />
<button onclick="analyze()">Analyze</button>

<div id="result" class="card" style="display:none;">
  <div class="score" id="score"></div>
  <p><strong>Summary:</strong> <span id="summary"></span></p>
  <p><strong>Roadmap:</strong></p>
  <ul id="roadmap"></ul>
</div>

<script>
async function analyze() {
  const repoUrl = document.getElementById("repoUrl").value;

  const resultDiv = document.getElementById("result");
  const scoreEl = document.getElementById("score");
  const summaryEl = document.getElementById("summary");
  const roadmapEl = document.getElementById("roadmap");

  resultDiv.style.display = "block";
  scoreEl.textContent = "Analyzing...";
  summaryEl.textContent = "";
  roadmapEl.innerHTML = "";

  try {
    const res = await fetch("/api/analyze", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ repoUrl })
    });

    const data = await res.json();

    scoreEl.textContent = `Score: ${data.score} / 100`;
    summaryEl.textContent = data.summary;

    roadmapEl.innerHTML = "";
    data.roadmap.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item;
      roadmapEl.appendChild(li);
    });

  } catch (err) {
    scoreEl.textContent = "Error";
    summaryEl.textContent = "Failed to analyze repository.";
  }
}
</script>

</body>
</html>
